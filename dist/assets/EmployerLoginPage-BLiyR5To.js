import{a as r,u as k,b as C,j as e,N as P,n as i,F as $}from"./index-C63xejpN.js";import{B as A}from"./config-BngW1GPq.js";const T=()=>{const[o,b]=r.useState(""),[n,v]=r.useState(""),[l,j]=r.useState({}),[u,c]=r.useState(""),[m,x]=r.useState(!1),d=k(),{loginCorporate:w,isAuthenticated:g,isCorporate:p,isHydrating:f}=C();r.useEffect(()=>{!f&&g&&p&&d("/client/dashboard",{replace:!0})},[f,g,p,d]);const h=(t,s="info")=>s==="success"?i.success(t):s==="error"?i.error(t):i(t),y=t=>/[^\s@]+@[^\s@]+\.[^\s@]+/.test(t),N=t=>/^\+?[0-9\s-]{7,15}$/.test(t),S=()=>{const t={};return y(o)||N(o)||(t.identifier="Enter a valid email or mobile number."),(!n||n.length<6)&&(t.password="Password must be at least 6 characters."),j(t),Object.keys(t).length===0},E=async t=>{if(t.preventDefault(),!!S()){x(!0),c("");try{const s=await fetch(`${A}/api/recruitment/login/corporate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({identifier:o.trim(),password:n})}),a=await s.json().catch(()=>({}));if(!s.ok){const L=a?.message||a?.error||`Login failed (${s.status})`;c(""),h(L,"error");return}a?.token&&a?.account&&w(a.token,a.account,!0),h(a?.message||"Login successful","success"),c("Login successful. Redirecting..."),setTimeout(()=>d("/client/dashboard",{replace:!0}),600)}catch{}finally{x(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-100",children:[e.jsx(P,{}),e.jsxs("section",{className:"relative py-16 bg-slate-900",children:[e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 -z-10 h-1 bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-900"}),e.jsxs("div",{className:"mx-auto max-w-sm px-4 sm:px-6",children:[e.jsx("h1",{className:"text-center text-2xl font-bold tracking-tight text-white sm:text-3xl",children:"Employer Demo Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-slate-300",children:"Login with your email or mobile and password."}),e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 flex max-w-sm flex-col gap-2",children:i.show&&e.jsx("div",{className:`pointer-events-auto rounded-md px-4 py-3 text-sm shadow-lg transition-all ${i.type==="error"?"bg-red-600 text-white":i.type==="success"?"bg-emerald-600 text-white":"bg-slate-800 text-white"}`,role:"status","aria-live":"polite",children:i.message})}),e.jsxs("form",{onSubmit:E,className:"mt-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-200",children:"Email or Mobile"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-600 bg-slate-800 text-slate-200 placeholder-slate-400 px-3 py-2 text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",placeholder:"you@company.com or +91 98765 43210",value:o,onChange:t=>b(t.target.value)}),l.identifier&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:l.identifier})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-200",children:"Password"}),e.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-600 bg-slate-800 text-slate-200 placeholder-slate-400 px-3 py-2 text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",placeholder:"••••••••",value:n,onChange:t=>v(t.target.value)}),l.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:l.password})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full rounded-lg bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-indigo-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 disabled:opacity-60 disabled:cursor-not-allowed",children:m?"Signing in…":"Sign in"})]}),u&&e.jsx("div",{className:"mt-4 text-center text-xs text-slate-400",children:u})]})]}),e.jsx($,{})]})};export{T as default};
