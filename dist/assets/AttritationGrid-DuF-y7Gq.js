import{u as C,b as S,a as t,j as e,N as E,F as P}from"./index-C63xejpN.js";import{B as A}from"./config-BngW1GPq.js";const H="/assets/Lock-BH0J_Z9H.jpg",B=()=>{const n=C(),{loginCorporate:p,logout:f,isCorporate:j,isHydrating:v}=S(),[N,a]=t.useState(!1),[d,y]=t.useState(""),[c,w]=t.useState(""),[m,x]=t.useState(!1),[g,o]=t.useState(""),u=!!j&&!v,L=async s=>{s.preventDefault(),x(!0),o("");try{const l=d.trim(),b=c.trim();if(!l||!b){o("Please enter email/mobile and password");return}const i=await fetch(`${A}/api/recruitment/login/corporate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({identifier:l,password:b})}),r=await i.json().catch(()=>({}));if(!i.ok||r?.success===!1){const h=r?.message||`Login failed (${i.status})`;o(h);return}try{p({token:r.token,account:r.account},!0)}catch{}a(!1),n("/confidential-data")}catch{o("Network error during login. Please try again.")}finally{x(!1)}},k=()=>{f()};return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-slate-100",children:[e.jsx(E,{}),e.jsx("section",{className:"relative py-10",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:u?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n("/confidential-data"),className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-sm font-semibold hover:bg-emerald-500",children:"Access Confidential Data"}),e.jsx("button",{onClick:k,className:"rounded-lg bg-slate-700 px-3 py-1.5 text-sm hover:bg-slate-600",children:"Logout"})]}):e.jsx("button",{onClick:()=>a(!0),className:"rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-semibold hover:bg-indigo-500",children:"Login"})}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-slate-800 bg-slate-900 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-700 bg-slate-950/60 flex items-center justify-center p-2",children:e.jsx("img",{src:H,alt:"Locked Preview",loading:"eager",decoding:"async",className:"h-auto w-full max-h-[600px] object-contain rounded-md shadow-md"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"HR Alert Report"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Explore attrition signals, HR alerts, and retention recommendations."})]})]}),!u&&e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"rounded-xl border border-slate-700 bg-slate-800/90 p-6 text-center shadow-xl",children:[e.jsx("div",{className:"mb-3 text-lg font-semibold",children:"Login required"}),e.jsx("p",{className:"mb-4 text-sm text-slate-300",children:"Please login to access confidential data"}),e.jsx("button",{onClick:()=>a(!0),className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-500",children:"Login"})]})})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-20 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-slate-700 bg-slate-900 p-5 shadow-xl",children:[e.jsx("div",{className:"mb-3 text-lg font-semibold",children:"Login"}),g&&e.jsx("div",{className:"mb-3 rounded-md border border-red-700 bg-red-900/30 p-2 text-sm text-red-300",children:g}),e.jsxs("form",{onSubmit:L,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-slate-300",children:"Email"}),e.jsx("input",{type:"email",className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white placeholder-slate-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",value:d,onChange:s=>y(s.target.value),placeholder:"you@company.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-slate-300",children:"Password"}),e.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-sm text-white placeholder-slate-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",value:c,onChange:s=>w(s.target.value),placeholder:"••••••••",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"rounded-lg px-3 py-2 text-sm text-slate-300 hover:text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-500 disabled:opacity-60",children:m?"Logging in...":"Login"})]})]})]})}),e.jsx(P,{})]})};export{B as default};
