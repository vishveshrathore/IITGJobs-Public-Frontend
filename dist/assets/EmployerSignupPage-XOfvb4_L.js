import{a as i,j as e,N as se,F as re,n as f}from"./index-C63xejpN.js";import{B as w}from"./config-BngW1GPq.js";const Q={companyName:"",industryType:"",hrName:"",mobile:"",email:"",designation:"",employeeStrength:"",password:"",location:"",productLine:""},ae={backgroundImage:"linear-gradient(90deg, #ffffff 0%, #dbeafe 40%, #6366f1 100%)",backgroundClip:"text",color:"transparent",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},oe=()=>{const[s,S]=i.useState(Q),[l,b]=i.useState({}),[L,Z]=i.useState([]),[B,A]=i.useState([]),[u,I]=i.useState(""),[E,C]=i.useState(""),[q,O]=i.useState(!1),[k,d]=i.useState(""),[_,y]=i.useState(""),[j,N]=i.useState(""),[$,F]=i.useState(!1),[p,v]=i.useState(!1),[P,x]=i.useState("form"),g=(t,a="info")=>a==="success"?f.success(t):a==="error"?f.error(t):f(t),c=(t,a)=>S(r=>({...r,[t]:a})),o=t=>b(a=>({...a,[t]:!0}));i.useEffect(()=>{(async()=>{try{const r=await(await fetch(`${w}/api/recruitment/recruiters/industries`,{credentials:"include"})).json().catch(()=>({})),n=Array.isArray(r)?r:Array.isArray(r?.industries)?r.industries:[];Z(n)}catch{f.error("Failed to load industries")}})()},[]),i.useEffect(()=>{(async()=>{if(!u){A([]);return}try{const r=await(await fetch(`${w}/api/recruitment/recruiters/companies/${u}`,{credentials:"include"})).json().catch(()=>({})),n=Array.isArray(r)?r:Array.isArray(r?.companies)?r.companies:[];A(n)}catch{f.error("Failed to load companies")}})()},[u]);const R=E!=="",D=u!=="",M=s.hrName.trim().length>=2,z=/^\+?[0-9\s-]{7,15}$/.test(s.mobile),H=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email),G=s.designation.trim().length>=2,J=s.employeeStrength===""||/^[0-9]+$/.test(s.employeeStrength),Y=typeof s.password=="string"&&s.password.length>=6,U=s.location.trim().length>=2,W=s.productLine.trim().length>=2,X=R&&D&&M&&z&&H&&G&&J&&Y&&U&&W,ee=async t=>{if(t.preventDefault(),b({companyName:!0,industryType:!0,hrName:!0,mobile:!0,email:!0,designation:!0,employeeStrength:!0,password:!0,location:!0,productLine:!0}),!!X){O(!0),d(""),y(""),x("otp");try{const r=`${w||""}/api/recruitment/create/corporate-account`,n=L.find(m=>String(m._id)===String(u)),h=B.find(m=>String(m._id)===String(E)),K={companyName:h?.CompanyName||h?.companyName||s.companyName.trim(),industryType:n?.name||s.industryType.trim(),hrName:s.hrName.trim(),mobile:s.mobile.trim(),email:s.email.trim(),designation:s.designation.trim(),password:s.password,location:s.location.trim(),productLine:s.productLine.trim()};s.employeeStrength!==""&&(K.employeeStrength=Number(s.employeeStrength));const T=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(K)}),V=await T.json().catch(()=>({}));if(T.ok)y(V?.message||"OTP sent to your email. Please verify."),g(V?.message||"OTP sent to your email. Please verify.","success"),S(m=>({companyName:"",industryType:"",hrName:"",mobile:"",email:m.email,designation:"",employeeStrength:"",password:"",location:"",productLine:""})),I(""),C(""),b({email:!0,password:!1});else{const m=V?.message||`Request failed with status ${T.status}`;d(m),g(m,"error"),x("form")}}catch{d("Network error. Please try again."),g("Network error. Please try again.","error"),x("form")}finally{O(!1)}}},te=async t=>{if(t.preventDefault(),!(!j||!s.email)){F(!0),d("");try{const a=`${w}/api/recruitment/verify/corporate`,r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:s.email.trim(),otp:j.trim()})}),n=await r.json().catch(()=>({}));if(r.ok)v(!0),y(n?.message||"Email verified successfully."),g(n?.message||"Email verified successfully.","success"),N(""),x("result");else{const h=n?.message||`Verification failed (${r.status})`;d(h),g(h,"error"),v(!1)}}catch{d("Network error during verification. Please try again."),g("Network error during verification. Please try again.","error"),v(!1)}finally{F(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-slate-100",children:[e.jsx(se,{}),e.jsxs("section",{className:"relative py-16 bg-slate-900",children:[e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 -z-10 h-1 bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-900"}),P==="form"&&e.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 p-8 rounded-2xl bg-slate-800 shadow-2xl shadow-indigo-900/40",children:[e.jsx("h1",{className:"text-center text-4xl font-extrabold tracking-tight sm:text-5xl",style:ae,children:"Employer Signup"}),e.jsx("p",{className:"mt-2 text-center text-sm text-slate-400",children:"Create your employer account to post jobs and hire faster under our PPM model."}),k&&e.jsxs("div",{className:"mt-4 p-3 bg-red-900/30 text-red-400 border border-red-700 rounded-xl text-sm font-medium",children:["Error: ",k]}),p&&e.jsxs("div",{className:"mt-4 p-3 bg-emerald-900/30 text-emerald-400 border border-emerald-700 rounded-xl text-sm font-medium",children:["Success: ",_]}),e.jsxs("form",{onSubmit:ee,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"HR Name"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.hrName,onChange:t=>c("hrName",t.target.value),onBlur:()=>o("hrName"),placeholder:"--",required:!0}),l.hrName&&!M&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter HR's full name."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Mobile Number"}),e.jsx("input",{type:"tel",className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.mobile,onChange:t=>c("mobile",t.target.value),onBlur:()=>o("mobile"),placeholder:"--",required:!0}),l.mobile&&!z&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter a valid phone number."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"E-mail"}),e.jsx("input",{type:"email",className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.email,onChange:t=>c("email",t.target.value),onBlur:()=>o("email"),placeholder:"",required:!0}),l.email&&!H&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter a valid email."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Designation"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.designation,onChange:t=>c("designation",t.target.value),onBlur:()=>o("designation"),placeholder:"",required:!0}),l.designation&&!G&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter a valid designation."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Industry"}),e.jsxs("select",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:u,onChange:t=>{I(t.target.value),C("")},onBlur:()=>o("industryType"),required:!0,children:[e.jsx("option",{value:"",children:"Select industry..."}),L.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]}),l.industryType&&!D&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Please select an industry."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Company"}),e.jsxs("select",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:E,onChange:t=>C(t.target.value),onBlur:()=>o("companyName"),required:!0,disabled:!u,children:[e.jsx("option",{value:"",children:"Select company..."}),B.map(t=>e.jsx("option",{value:t._id,children:t.CompanyName||t.companyName},t._id))]}),l.companyName&&!R&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Please select a company."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Location"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.location,onChange:t=>c("location",t.target.value),onBlur:()=>o("location"),placeholder:"--",required:!0}),l.location&&!U&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter a valid location."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Product Line"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.productLine,onChange:t=>c("productLine",t.target.value),onBlur:()=>o("productLine"),placeholder:"--",required:!0}),l.productLine&&!W&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter a valid product line."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Password"}),e.jsx("input",{type:"password",className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.password,onChange:t=>c("password",t.target.value),onBlur:()=>o("password"),placeholder:"",required:!0}),l.password&&!Y&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Password must be at least 6 characters."})]}),e.jsx("div",{})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Employee Strength"}),e.jsx("input",{className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:s.employeeStrength,onChange:t=>c("employeeStrength",t.target.value),onBlur:()=>o("employeeStrength"),placeholder:""}),l.employeeStrength&&!J&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Enter a numeric value."})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{disabled:!X||q,type:"submit",className:"inline-flex items-center justify-center rounded-lg bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-md transition hover:scale-[1.01] hover:bg-indigo-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed",children:q?"Submitting...":"Submit For Demo"})})]})]}),P==="otp"&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60 px-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-800 p-6 shadow-2xl",children:[e.jsx("h2",{className:"text-center text-2xl font-bold text-white",children:"Verify Your Email"}),e.jsxs("p",{className:"mt-1 text-center text-slate-300",children:["We sent a verification code to ",e.jsx("span",{className:"font-semibold",children:s.email})]}),e.jsxs("form",{onSubmit:te,className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"mb-1 block text-sm font-medium",children:"Enter OTP"}),e.jsx("input",{id:"otp",className:"w-full rounded-lg border border-slate-600 bg-slate-700 text-white placeholder-slate-400 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:j,onChange:t=>N(t.target.value),placeholder:"6-digit OTP",maxLength:6,required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{disabled:$||j.trim().length<4,type:"submit",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:scale-[1.01] hover:bg-emerald-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed",children:$?"Verifying...":"Verify OTP"}),e.jsx("button",{type:"button",onClick:()=>{x("form"),N(""),d("")},className:"text-sm text-slate-300 hover:text-white",children:"Change email"})]})]})]})}),P==="result"&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-slate-800 p-6 shadow-2xl text-center",children:[e.jsx("h3",{className:`text-lg font-semibold ${p?"text-emerald-400":"text-red-400"}`,children:p?"Success":"Error"}),e.jsx("p",{className:"mt-2 text-slate-200",children:_||k}),e.jsx("button",{type:"button",onClick:()=>{p?window.location.assign("/"):(x("form"),S(Q),b({}),N(""),v(!1),d(""),y(""))},className:"mt-4 inline-flex items-center justify-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-500",children:p?"Go to Home":"Close"})]})})]}),e.jsx(re,{})]})};export{oe as default};
